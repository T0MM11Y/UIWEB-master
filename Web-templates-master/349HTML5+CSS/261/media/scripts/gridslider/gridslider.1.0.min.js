/*

GridSlider v1.0 - for jQuery 1.5+ - Mar 2012

copyright: Mateusz Jastrzebski 2012,
contact: mat.jastrzebski@gmail.com or contact.pordesign@gmail.com
website: http://ether-wp.com/ or http://pordesign.eu/
buy license at: http://codecanyon.net/

*/
(function(b){var a={};a.inView=function(d){var e=d.offset().top,f=d.outerHeight(),g=b(window).scrollTop(),c=b(window).height();if((e+f<g+c&&e+f>g)||(e<g+c&&e>g)){return true}else{return false}};a.autoplayPause=function(d,c){c.autoplay_active=0;clearTimeout(c.autoplay_stamp)};a.autoplayResume=function(d,c){clearTimeout(c.autoplay_stamp);if(c.autoplay_enable===true&&c.force_autoplay_pause!==1){c.autoplay_active=1;c.autoplay_stamp=setTimeout(function(){a.shiftInit(d,c,"relative",c.autoplay_shift_dir);a.autoplayResume(d,c)},c.autoplay_interval*1000)}};a.autoplayInit=function(d,c){if(c.autoplay_enable===true){b(window).bind("load",function(){if(a.inView(d)){a.autoplayResume(d,c)}}).bind("blur",function(){a.autoplayPause(d,c)}).bind("focus",function(){a.autoplayResume(d,c)}).bind("scroll",function(){if(!a.inView(d)){if(c.autoplay_active===1&&c.autoplay_enable===true){a.autoplayPause(d,c)}}else{if(c.autoplay_active!==1&&c.autoplay_enable===true){a.autoplayResume(d,c)}}})}else{clearTimeout(c.autoplay_stamp);c.autoplay_active=0}};a.windowHeightSet=function(d,c){c.elem_height=c.col_group_elems.eq(c.view_pos).outerHeight()-c.col_spacing_size*c.col_spacing_enable;c.slider_window.stop(true,true).animate({height:c.elem_height},c.scroll_speed)};a.shiftApply=function(g,k){var j=["x","y","z"],l=["slide","slideIn","slideOut","switch","swap"],h,d,e=0,n=0,c=0,m=0,i=1,f=1;if(k.transition==="random"){d=true;k.transition=l[Math.ceil(Math.random()*l.length-1)]}if(k.scroll_axis==="random"){h=true;k.scroll_axis=j[Math.ceil(Math.random()*j.length-1)]}if(k.scroll_axis==="x"){e=1;c=1}else{if(k.scroll_axis==="y"){n=1;m=1}}if(k.transition==="slideIn"){c=0;m=0}else{if(k.transition==="slideOut"){e=0;n=0}}if(k.transition==="switch"||k.transition==="swap"||k.transition==="shuffle"){f=-1}if(d===true){k.transition="random"}if(h===true){k.scroll_axis="random"}k.col_group_elems.eq(k.view_pos).css({left:k.shift_dir*k.elem_width*e*i,top:k.shift_dir*k.elem_height*n*i,visibility:"visible","z-index":10,opacity:0}).animate({left:0,top:0,opacity:1},k.scroll_speed).end().eq(k.prev_view_pos).css({left:0,top:0}).animate({left:-k.shift_dir*k.elem_width*c*f,top:-k.shift_dir*k.elem_height*m*f,opacity:0},k.scroll_speed,function(){b(this).css({visibility:"hidden","z-index":-1})});a.windowHeightSet(g,k);var o=setTimeout(function(){k.shift_busy=0},k.scroll_speed)};a.shiftInit=function(f,c,e,d){if(c.shift_busy!==1){if(e==="relative"){c.shift_dir=d}else{if(e==="absolute"){c.shift_dir=function(){if(d>c.view_pos){return 1}else{if(d<c.view_pos){return -1}else{return 0}}}()}}if(c.shift_dir!==0){c.prev_view_pos=c.view_pos;c.view_pos=function(){if(e==="relative"){if(c.view_pos+c.shift_dir<0){return c.col_group_count-1}else{if(c.view_pos+c.shift_dir>c.col_group_count-1){return 0}else{return c.view_pos+c.shift_dir}}}else{if(e==="absolute"){return d}}}();if(c.ctrl_pag===true){c.ctrl_pag_elem.children().removeClass("current").eq(c.view_pos).addClass("current")}c.shift_busy=1;a.shiftApply(f,c)}}};a.rowsSet=function(g,d){var c,f=0,e;if(d.grid_height==="auto"){for(c=0;c<d.col_elem_count;c+=1){e=d.col_elems.eq(c).height();if(e>f){f=e}else{d.col_elems.eq(c).css({"margin-bottom":f-e})}if(c%d.true_cols===0){f=0}}}else{if(d.grid_height==="constrain"){d.col_elems.css({height:d.col_elem_width,overflow:"hidden"})}else{if(typeof d.grid_height==="number"){d.col_elems.css({height:d.grid_height,overflow:"hidden"})}}}};a.sliderFnInit=function(d,c){if(c.col_group_count>1){a.autoplayInit(d,c);d.bind("mouseenter",function(){var f=b(window).scrollLeft(),e=b(window).scrollTop();a.autoplayPause(d,c);c.ctrl_wrap.stop(true,true).fadeIn(500)}).bind("mouseleave",function(){a.autoplayResume(d,c);c.ctrl_wrap.stop(true,true).delay(500).fadeOut(500)});if(c.ctrl_wrap){c.ctrl_wrap.css({"margin-left":function(){return -b(this).outerWidth()/2},"margin-top":function(){return -b(this).outerHeight()/2-c.col_spacing_size/2*c.col_spacing_enable}}).find(".ether-ctrl").attr("unselectable","on").css({"-ms-user-select":"none","-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).bind("click",function(){this.onselectstart=function(){return false};a.shiftInit(d,c,b(this).data("shifttype"),b(this).data("shiftdest"));a.autoplayResume(d,c);return false})}}};a.colGroupsSet=function(e,d){var c;if(d.col_group_elems){d.col_elems.unwrap()}for(c=0;c<d.col_elem_count;c+=d.col_group_size){b('<div class="ether-col-group"></div>').appendTo(d.col_elems_wrap).append(function(){if(c+d.col_group_size<d.col_elem_count){return d.col_elems_wrap.children().slice(0,d.col_group_size)}else{return d.col_elems_wrap.children().slice(0,d.col_elem_count-c)}})}d.col_group_elems=e.find(".ether-col-group");d.col_group_elems.eq(d.view_pos).css({"z-index":1,visibility:"visible"});d.elem_height=d.col_group_elems.eq(d.view_pos).outerHeight()-d.col_spacing_size*d.col_spacing_enable};a.ctrlWidthSet=function(d,c){if(c.ctrl_pag===true){c.ctrl_pag_elem.children().css({display:"block"}).slice(c.col_group_count).css({display:"none"}).end().end().css({width:function(){return c.col_group_count*(b(this).children().outerWidth()+parseInt(b(this).children().css("margin-left"),10)+parseInt(b(this).children().css("margin-right"),10))}});c.ctrl_pag_elem.children().eq(c.view_pos).addClass("current")}if(c.ctrl_arrows===true&&c.ctrl_pag===true){c.ctrl_wrap.css({width:function(){if(c.ctrl_pag&&c.ctrl_arrows&&c.ctrl_pag_elem.outerWidth()>c.ctrl_arrows_elem.outerWidth()){return c.ctrl_pag_elem.outerWidth()}else{return c.ctrl_arrows_elem.outerWidth()}},"margin-left":function(){return -b(this).outerWidth()/2}})}else{c.ctrl_wrap.css({width:c.ctrl_arrows_elem_width})}};a.sliderStructureInit=function(d,c){if(!d.hasClass("ether-slider")){d.addClass("ether-slider").children().wrapAll('<div class="ether-slider-window"></div>')}c.slider_window=d.find(".ether-slider-window");a.colGroupsSet(d,c);c.slider_window.height(c.original_elem_height);a.windowHeightSet(d,c);if(c.ctrl_arrows===true||c.ctrl_pag===true){b('<div class="ether-ctrl-wrap"></div>').appendTo(d).hide();c.ctrl_wrap=d.find(".ether-ctrl-wrap")}if(c.ctrl_arrows===true){c.ctrl_wrap.append('<div class="ether-ctrl-car"><div class="ether-prev ether-ctrl" data-shifttype="relative" data-shiftdest="-1"></div><div class="ether-next ether-ctrl" data-shifttype="relative" data-shiftdest="1"></div></div>');c.ctrl_arrows_elem=c.ctrl_wrap.find(".ether-ctrl-car");c.ctrl_arrows_elem_width=c.ctrl_arrows_elem.outerWidth()}if(c.ctrl_pag===true){c.ctrl_wrap.append(function(){var f,e="";e+='<div class="ether-ctrl-pag">';for(f=0;f<c.col_elem_count;f+=1){e+='<div class="ether-ctrl" data-shifttype="absolute" data-shiftdest="'+f+'"></div>'}e+="</div>";return e});c.ctrl_pag_elem=c.ctrl_wrap.find(".ether-ctrl-pag");c.ctrl_pag_elem_width=c.ctrl_pag_elem.outerWidth();c.ctrl_wrap.css({width:function(){if(c.ctrl_pag&&c.ctrl_arrows&&c.ctrl_pag_elem_width>c.ctrl_arrows_elem_width){return c.ctrl_pag_elem_width}else{return c.ctrl_arrows_elem_width}}})}a.ctrlWidthSet(d,c);a.sliderFnInit(d,c);b(window).bind("resize",function(){a.colGroupsSet(d,c);a.windowHeightSet(d,c);a.ctrlWidthSet(d,c)})};a.gridDataSet=function(d,c){c.elem_width=d.outerWidth();c.original_elem_height=d.outerHeight();c.col_elems_wrap=d.find(".ether-cols");c.col_elems=d.find(".ether-col");c.col_elem_count=c.col_elems.length;c.col_elem_width=c.col_elems.outerWidth();c.true_cols=Math.round(c.elem_width/c.col_elem_width);if(b(window).width()<580){if(!c.original_rows){c.original_rows=c.rows}c.rows=1}if(b(window).width()>580&&typeof c.original_rows==="number"&&c.rows!==c.original_rows){c.rows=c.original_rows}c.col_group_size=c.rows*c.true_cols;c.col_group_count=Math.ceil(c.col_elem_count/c.col_group_size);if(c.view_pos>=c.col_group_count){c.view_pos=0}};a.styleContentGenerate=function(e,d){var c="";if(d.col_spacing_size!==30&&d.col_spacing_enable!==0){c+=".ether-grid"+d.elem_selector+" .ether-cols { margin: "+-(d.col_spacing_size/2)+"px; } .ether-grid"+d.elem_selector+" .ether-cols .ether-col { padding: "+(d.col_spacing_size/2)+"px;}";if(b.browser.msie&&parseInt(b.browser.version,10)===7){c+=".ie7-ether-grid-fix.cols-wrap { margin:"+-(d.col_spacing_size/2)+"px !important; } .ie7-ether-grid-fix.cols-wrap .ether-col > *:first-child { padding: "+d.col_spacing_size/2+"px !important; }"}}if(d.width!=="auto"){c+=d.elem_selector+" { width: "+d.width+"; }"}return c};a.gridStructureInit=function(j,c){var i=function(){if(b.browser.msie&&b.browser.version<9){return"body"}else{return"head"}}(),h=function(){var k=["ether-grid","ether-cols-"+c.cols,"ether-rows-"+c.rows,"ether-col-spacing-"+c.col_spacing_enable,"image-stretch-mode-"+c.image_stretch_mode,"align"+c.align];return k.join(" ")},g=j.find("img"),e=g.length;if(b.browser.msie&&parseInt(b.browser.version,10)===7){j.addClass("ie7-ether-grid-fix")}if(j.find(".ether-cols").length===0){j.addClass(h()).children().wrapAll('<div class="ether-cols"></div>').wrap('<div class="ether-col"></div>')}if(!a.css){a.css=""}a.css+=a.styleContentGenerate(j,c);b(i).find(".ether-slider-custom-styles").remove().end().append('<style class="ether-slider-custom-styles">'+a.css+"</style>");if(g.length>0){if(!f){var f=0,d=0}g.each(function(k){b(this).bind("load",function(){f+=1;if((f===e&&d===0)||(f!==e&&k===e-1&&d===0)){d=1;a.gridDataSet(j,c);a.rowsSet(j,c);if(c.slider===true){a.sliderStructureInit(j,c)}}}).bind("error",function(){b(this).off("error").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQwNkI5RDRFNjFBQzExRTE5MjJDRjRGMUM2MTdDODUyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQwNkI5RDRGNjFBQzExRTE5MjJDRjRGMUM2MTdDODUyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDA2QjlENEM2MUFDMTFFMTkyMkNGNEYxQzYxN0M4NTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDA2QjlENEQ2MUFDMTFFMTkyMkNGNEYxQzYxN0M4NTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4G1oNaAAAABlBMVEX///8AAABVwtN+AAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC")});if((typeof this.complete!="undefined"&&this.complete)||(typeof this.naturalWidth!="undefined"&&this.naturalWidth>0)){b(this).trigger("load").off("load")}})}else{a.gridDataSet(j,c);a.rowsSet(j,c);if(c.slider===true){a.sliderStructureInit(j,c)}}b(window).bind("resize",function(){a.gridDataSet(j,c);a.rowsSet(j,c)})};b.fn.gridSlider=function(c){var e={slider:true,cols:1,rows:1,width:"auto",align:"auto",col_spacing_enable:true,col_spacing_size:30,ctrl_arrows:true,ctrl_pag:true,scroll_axis:"x",transition:"slide",scroll_speed:500,autoplay_enable:false,autoplay_interval:5,autoplay_shift_dir:1,view_pos:0,grid_height:"auto",image_stretch_mode:"auto"},d=b(this).selector.split(", "),c=b.extend(e,c);return this.each(function(f){if(!b(this).data("ether_grid_slider")){b(this).data("ether_grid_slider",true);c.elem_selector=d[f];a.gridStructureInit(b(this),jQuery.extend(true,{},c))}})}})(jQuery);